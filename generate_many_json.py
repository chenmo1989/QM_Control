from quam import QuAM
import numpy as np

machine = QuAM('quam_state.json')

qubits_name = ["q" + str(i) for i in range(0, 7)]
qubits_f_01 = [6379991612.0, 6198105350.0, 6058880399.0, 5886189713.0, 5731358122.0, 5535864722.0, 5392255962.0]
qubits_f_tls = [6379991612.0],[5403895143.0,5116882049.0],[5216848939.0,5000307693.0,4983920074.0,4717830683.0,4658632367.0],[5886189713.0],[5731358122.0],[5535864722.0],[5392255962.0]

qubits_pi_length = 100,
qubits_pi_amp = [0.0219022, 0.02579, 0.0241827, 0.0178619, 0.0226894, 0.13, 0.155]
qubits_pi_length_tls = [[200], [316, 316], [372, 370, 372], [200], [200], [200], [152]]
qubits_pi_amp_tls = [[0.5], [0.5, 0.5], [0.5, 0.5, 0.5], [0.216], [0.2], [0.4], [0.24982]]
qubits_DC_tuning_curve = [
    [-259.564909569907, -1088.2101297205995, -2014.2554545227738, -1681.8414151419722, 5869.699755456909],
    [-23.790512062755905, -54.231964548238416, -197.74810486439196, -168.52990781220484, 6157.838438485797],
    [-320.3772939143499, -709.2688188643774, 5604.388457480038],
    [-163.023689551866, -316.8098093728373, 5658.8148955845845],
    [-220.37788145264477, 19.40973341259715, -193.74577167050558, -54.35511864729645, 5727.301522689085],
    [-17.25763682597757, -1.0153056155814857, -163.891873377102, -3.32844309350846, 5536.039300868331],
    [-582.9940791628313, -333.44309909887363, -144.34789960789735, -27.33111427933232, 5390.822407967138]]
qubits_AC_tuning_curve = [
    [-2691.92698310245, -1.6408695958164547e-11, -7045.225267472428, -3.6420416417646995e-12, 6383.79951322224],
    [-3252.9844245920476, -7.231191803611144e-11, -7009.3733632193325, -1.0989294867674194e-11, 6199.175396552997],
    [-4527.965349596948, 2.5203334023583843e-11, -6051.076096708743, 3.4002957965609225e-13, 6059.0315040783335],
    [-2839.7598710498833, -9.898203439903331e-12, -6233.5115733600505, 7.463946096276081e-13, 5913.191221344851],
    [-2204.092890520581, 5.351315783852019e-12, -5889.182910713791, -5.394571694711479e-13, 5716.563003562739],
    [-2830.918072894284, -1.1130347366317116e-11, -6367.793329825964, 1.5856564776320436e-12, 5534.153139013148],
    [-6934.518928704661, 0.0, -9151.25138280838, 2.3770627251141206e-12, 5414.433434267568]]

dc_flux_name = ["dc" + str(i) for i in range(0, 7)]
dc_flux_max_freq_point = [-0.860512992990632,-0.5007251114168757,-1.106927413922777,-0.9716680141509257,-0.12731053240085724,-0.01029827979313157,-0.14231959780328562]
dc_flux_dc_voltage = [0.0, -0.5007251114168757, 0.0, 0.0, 0.0, 0.0, 0.0]

flux_lines_name = ["flux" + str(i) for i in range(0, 7)]
flux_lines_iswap_length = [[10, 10, 20], [20, 20], [37, 19, 20, 27, 31, 19, 19, 20, 16], [26], [13], [30], [17]]
flux_lines_iswap_level = [[0.2635, 0.2635, 0.43], [0.3298, 0.3278],
                             [0.2, 0.3565, 0.4375, 0.3125, 0.28, 0.3565, 0.3985, 0.44, 0.4485], [0.183], [0.129],
                             [0.344505], [0.2205]]

resonators_name = ["r" + str(i) for i in range(0, 7)]
resonators_f_readout = [7262467779.0, 7133060104.0, 7003928309.0, 6879956136.0, 6226640931.0, 6119706949.0,
                           6020919882.0]
resonators_tuning_curve =[[7255.796707659211,179.16917387022852,29374.236709890443,0.07395235470820939,0.4152608763075678,80.03042769693933],[7128.0128098512705,171.13641748315433,29198.031946577892,0.05208654853065136,0.15425164190158128,77.34234431732581],[6997.898349689344,172.15229222219776,27636.91832174209,0.07128271218057483,0.49577340620759636,77.90996459589019],[6874.437828070531,165.1731065325438,27082.184425577547,0.05216250687987988,0.31846098203712037,77.2836843093797],[6215.373495206403,188.03982159627492,22609.806062171974,0.07805152298373091,0.07194617936669782,81.02589450107402],[6110.863234871817,150.64480076410982,26617.64521902542,0.05608367379125581,0.00580283033911461,73.45108293068786],[6011.900192388081,154.01909677425778,24589.640643805407,0.07835195212069247,0.07733932118042838,77.551674041824]]

qubits_connectivity = [(3, 4, 3, "con1")]
resonators_connectivity = [(1, 2, 1, "con1")]

flux_lines_connectivity = [(7, "con1"),(8, "con1"),(9, "con1"),(10, "con1"),(7, "con1"),(8, "con1"),(9, "con1")]
ROI = [32.0,38.0,38.0,36.0,40.0,42.0,40.0]
TWPA_freq = [6324E6,6324E6,6324E6,6324E6,6730.6E6,6730.6E6,6730.6E6]
TWPA_pwr = [-10,-10.0,-10.0,-10.0,-11.3,-11.3,-11.3]

for i in range(len(qubits_name)):
    machine.qubits[0].name = qubits_name[i]
    machine.qubits[0].f_01 = qubits_f_01[i]
    machine.qubits[0].f_tls = qubits_f_tls[i]
    machine.qubits[0].pi_length = qubits_pi_length
    machine.qubits[0].pi_amp = qubits_pi_amp[i]
    machine.qubits[0].pi_length_tls = qubits_pi_length_tls[i]
    machine.qubits[0].pi_amp_tls = qubits_pi_amp_tls[i]
    machine.qubits[0].DC_tuning_curve = qubits_DC_tuning_curve[i]
    machine.qubits[0].AC_tuning_curve = qubits_AC_tuning_curve[i]
    machine.flux_lines[0].name = flux_lines_name[i]
    machine.flux_lines[0].iswap.length = flux_lines_iswap_length[i]
    machine.flux_lines[0].iswap.level = flux_lines_iswap_level[i]
    machine.flux_lines[0].wiring.port = flux_lines_connectivity[i][0]
    machine.resonators[0].name = resonators_name[i]
    machine.resonators[0].f_readout = resonators_f_readout[i]
    machine.resonators[0].tuning_curve = resonators_tuning_curve[i]
    machine.resonators[0].RO_attenuation = [ROI[i], 10.0]
    machine.resonators[0].TWPA = [TWPA_freq[i], TWPA_pwr[i]]
    for j in range(len(dc_flux_name)):
        machine.dc_flux[j].name = dc_flux_name[j]
        machine.dc_flux[j].max_frequency_point = dc_flux_max_freq_point[j]
        machine.dc_flux[j].dc_voltage = dc_flux_dc_voltage[j]
    machine.octaves[0].LO_sources[0].LO_frequency = machine.resonators[0].f_readout + 50E6
    machine.octaves[0].LO_sources[1].LO_frequency = machine.qubits[0].f_01 + 100E6

    machine.global_parameters.name = 'quam_state_q' + str(i) + '.json'

    machine._save(machine.global_parameters.name)
